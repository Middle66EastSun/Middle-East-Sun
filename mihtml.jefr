<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¬ÙØ± - Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬ÙˆØ§Ø¨ Ø¯Ù‚ÛŒÙ‚</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tahoma', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 15px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }

        .question-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .question-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .method-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .method-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .method-card.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .results {
            margin-top: 30px;
        }

        .final-answer {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .analysis-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .analysis-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .calculation-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .letter-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 5px;
            margin-top: 15px;
        }

        .letter-value {
            background: #667eea;
            color: white;
            padding: 5px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
        }

        .final-verdict {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .confidence-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            transition: width 0.5s ease;
        }

        .interpretation-text {
            line-height: 1.8;
            margin-top: 15px;
        }

        .number-highlight {
            background: #ffc107;
            color: #212529;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¬ÙØ±</h1>
        
        <div class="input-section">
            <label for="questionInput" style="font-size: 1.2em; font-weight: bold; margin-bottom: 15px; display: block;">Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø¨Ù¾Ø±Ø³ÛŒØ¯:</label>
            <textarea id="questionInput" class="question-input" placeholder="Ù…Ø«Ø§Ù„: Ø¢ÛŒØ§ Ø§Ø²Ø¯ÙˆØ§Ø¬ Ø¨Ø§ Ø§ÛŒÙ† Ø´Ø®Øµ Ø¨Ø±Ø§ÛŒÙ… Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³ØªØŸ ÛŒØ§ Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø´ØºÙ„ ÙØ¹Ù„ÛŒâ€ŒØ§Ù… Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡Ù…ØŸ"></textarea>
            
            <div style="margin-top: 20px;">
                <label style="font-size: 1.1em; font-weight: bold; margin-bottom: 10px; display: block;">Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ (Ú†Ù†Ø¯ÛŒÙ† Ø±ÙˆØ´ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯):</label>
                <div class="methods-grid">
                    <div class="method-card" data-method="traditional" onclick="toggleMethod(this)">
                        <div>ğŸ”¢ Ø±ÙˆØ´ Ø³Ù†ØªÛŒ</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Ø§Ø¨Ø¬Ø¯ Ú©Ø¨ÛŒØ±</div>
                    </div>
                    <div class="method-card" data-method="zodiac" onclick="toggleMethod(this)">
                        <div>â™ˆ Ø±ÙˆØ´ Ø¨Ø±ÙˆØ¬</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Ø¯ÙˆØ§Ø²Ø¯Ù‡ Ø¨Ø±Ø¬</div>
                    </div>
                    <div class="method-card" data-method="elements" onclick="toggleMethod(this)">
                        <div>ğŸŒŸ Ø±ÙˆØ´ Ø¹Ù†Ø§ØµØ±</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Ø¢ØªØ´ØŒ Ø¢Ø¨ØŒ Ø®Ø§Ú©ØŒ Ø¨Ø§Ø¯</div>
                    </div>
                    <div class="method-card" data-method="planets" onclick="toggleMethod(this)">
                        <div>ğŸª Ø±ÙˆØ´ Ø³ÛŒØ§Ø±Ø§Øª</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Ù‡ÙØª Ø³ÛŒØ§Ø±Ù‡</div>
                    </div>
                    <div class="method-card" data-method="advanced" onclick="toggleMethod(this)">
                        <div>âš¡ Ø±ÙˆØ´ Ù¾ÛŒØ´Ø±ÙØªÙ‡</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">ØªØ±Ú©ÛŒØ¨ÛŒ</div>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="button" onclick="performAdvancedAnalysis()">ğŸ” ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬ÙˆØ§Ø¨</button>
        
        <div id="results" class="results" style="display: none;">
            <div id="finalAnswer" class="final-answer"></div>
            <div id="analysisGrid" class="analysis-grid"></div>
            <div id="calculationDetails" class="calculation-details"></div>
            <div id="finalVerdict" class="final-verdict"></div>
        </div>
    </div>

    <script>
        let selectedMethods = [];

        const abjadTable = {
            'Ø§': 1, 'Ø¢': 1, 'Ø¨': 2, 'Ø¬': 3, 'Ø¯': 4, 'Ù‡': 5, 'Ùˆ': 6, 'Ø²': 7, 'Ø­': 8, 'Ø·': 9,
            'ÛŒ': 10, 'Ú©': 20, 'Ù„': 30, 'Ù…': 40, 'Ù†': 50, 'Ø³': 60, 'Ø¹': 70, 'Ù': 80, 'Øµ': 90,
            'Ù‚': 100, 'Ø±': 200, 'Ø´': 300, 'Øª': 400, 'Ø«': 500, 'Ø®': 600, 'Ø°': 700, 'Ø¶': 800, 'Ø¸': 900, 'Øº': 1000,
            'Ù¾': 2, 'Ú†': 3, 'Ú˜': 7, 'Ú¯': 20, 'Ø¡': 1, 'Ø¦': 10, 'Ø©': 5
        };

        const zodiacSigns = ['Ø­Ù…Ù„', 'Ø«ÙˆØ±', 'Ø¬ÙˆØ²Ø§', 'Ø³Ø±Ø·Ø§Ù†', 'Ø§Ø³Ø¯', 'Ø³Ù†Ø¨Ù„Ù‡', 'Ù…ÛŒØ²Ø§Ù†', 'Ø¹Ù‚Ø±Ø¨', 'Ù‚ÙˆØ³', 'Ø¬Ø¯ÛŒ', 'Ø¯Ù„Ùˆ', 'Ø­ÙˆØª'];
        const elements = ['Ø¢ØªØ´', 'Ø¢Ø¨', 'Ø®Ø§Ú©', 'Ø¨Ø§Ø¯'];
        const planets = ['Ø®ÙˆØ±Ø´ÛŒØ¯', 'Ù…Ø§Ù‡', 'Ù…Ø±ÛŒØ®', 'Ø¹Ø·Ø§Ø±Ø¯', 'Ù…Ø´ØªØ±ÛŒ', 'Ø²Ù‡Ø±Ù‡', 'Ø²Ø­Ù„'];

        const interpretations = {
            traditional: {
                1: 'Ø¢ØºØ§Ø² Ø¬Ø¯ÛŒØ¯ØŒ Ø±Ù‡Ø¨Ø±ÛŒØŒ Ø§Ø³ØªÙ‚Ù„Ø§Ù„ - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª',
                2: 'Ù‡Ù…Ú©Ø§Ø±ÛŒØŒ ØµØ¨Ø±ØŒ Ø¯ÙˆÚ¯Ø§Ù†Ú¯ÛŒ - Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ£Ù…Ù„',
                3: 'Ø®Ù„Ø§Ù‚ÛŒØªØŒ Ø§Ø±ØªØ¨Ø§Ø·ØŒ Ø´Ø§Ø¯ÛŒ - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª',
                4: 'Ø«Ø¨Ø§ØªØŒ Ú©Ø§Ø± Ø³Ø®ØªØŒ Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª Ø¨Ø§ ØªÙ„Ø§Ø´',
                5: 'ØªØºÛŒÛŒØ±ØŒ Ø¢Ø²Ø§Ø¯ÛŒØŒ Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆÛŒÛŒ - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª',
                6: 'Ø¹Ø´Ù‚ØŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ØŒ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª',
                7: 'Ù…Ø¹Ù†ÙˆÛŒØªØŒ ØªØ£Ù…Ù„ØŒ Ø¯Ø±ÙˆÙ†Ú¯Ø±Ø§ÛŒÛŒ - Ù†ÛŒØ§Ø² Ø¨Ù‡ ØµØ¨Ø±',
                8: 'Ù‚Ø¯Ø±ØªØŒ Ù…ÙˆÙÙ‚ÛŒØª Ù…Ø§Ø¯ÛŒØŒ Ú©Ù†ØªØ±Ù„ - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª',
                9: 'Ú©Ù…Ø§Ù„ØŒ Ø®Ø¯Ù…ØªØŒ Ù¾Ø§ÛŒØ§Ù† - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª Ø¨Ø§ ØªÚ©Ù…ÛŒÙ„'
            },
            zodiac: {
                'Ø­Ù…Ù„': 'Ø¢ØªØ´ØŒ Ø±Ù‡Ø¨Ø±ÛŒØŒ Ø´Ø±ÙˆØ¹ - Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯',
                'Ø«ÙˆØ±': 'Ø®Ø§Ú©ØŒ Ø«Ø¨Ø§ØªØŒ ØµØ¨Ø± - Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯',
                'Ø¬ÙˆØ²Ø§': 'Ø¨Ø§Ø¯ØŒ Ø§Ø±ØªØ¨Ø§Ø·ØŒ ØªØºÛŒÛŒØ± - Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯',
                'Ø³Ø±Ø·Ø§Ù†': 'Ø¢Ø¨ØŒ Ø§Ø­Ø³Ø§Ø³ØŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ - Ø¨Ù‡ Ù‚Ù„Ø¨ØªØ§Ù† Ú¯ÙˆØ´ Ø¯Ù‡ÛŒØ¯',
                'Ø§Ø³Ø¯': 'Ø¢ØªØ´ØŒ Ù‚Ø¯Ø±ØªØŒ Ø®ÙˆØ¯Ø¨Ø§ÙˆØ±ÛŒ - Ø¬Ù„Ùˆ Ø¨Ø±ÙˆÛŒØ¯',
                'Ø³Ù†Ø¨Ù„Ù‡': 'Ø®Ø§Ú©ØŒ Ø¯Ù‚ØªØŒ ØªØ­Ù„ÛŒÙ„ - Ø¨Ø±Ø±Ø³ÛŒ Ø¨ÛŒØ´ØªØ±',
                'Ù…ÛŒØ²Ø§Ù†': 'Ø¨Ø§Ø¯ØŒ ØªØ¹Ø§Ø¯Ù„ØŒ Ø¹Ø¯Ø§Ù„Øª - Ù…ØªØ¹Ø§Ø¯Ù„ ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±ÛŒØ¯',
                'Ø¹Ù‚Ø±Ø¨': 'Ø¢Ø¨ØŒ ØªØ­ÙˆÙ„ØŒ Ø¹Ù…Ù‚ - ØªØºÛŒÛŒØ± Ø¨Ø²Ø±Ú¯ Ø¯Ø± Ø±Ø§Ù‡ Ø§Ø³Øª',
                'Ù‚ÙˆØ³': 'Ø¢ØªØ´ØŒ Ø¢Ø²Ø§Ø¯ÛŒØŒ Ø³ÙØ± - ÙØ±ØµØª Ø®ÙˆØ¨',
                'Ø¬Ø¯ÛŒ': 'Ø®Ø§Ú©ØŒ Ø¬Ø¯ÛŒØªØŒ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª - Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø·',
                'Ø¯Ù„Ùˆ': 'Ø¨Ø§Ø¯ØŒ Ù†ÙˆØ¢ÙˆØ±ÛŒØŒ Ø¯ÙˆØ³ØªÛŒ - Ø±Ø§Ù‡ Ø¬Ø¯ÛŒØ¯',
                'Ø­ÙˆØª': 'Ø¢Ø¨ØŒ Ø±ÙˆØ­Ø§Ù†ÛŒØªØŒ Ø´Ù‡ÙˆØ¯ - Ø¨Ù‡ Ø´Ù‡ÙˆØ¯ØªØ§Ù† Ø§Ø¹ØªÙ…Ø§Ø¯ Ú©Ù†ÛŒØ¯'
            },
            elements: {
                'Ø¢ØªØ´': 'Ø§Ù†Ø±Ú˜ÛŒØŒ Ø§Ù‚Ø¯Ø§Ù…ØŒ Ø´ÙˆØ± - Ø²Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ø³Øª',
                'Ø¢Ø¨': 'Ø§Ø­Ø³Ø§Ø³ØŒ Ø´Ù‡ÙˆØ¯ØŒ Ø§Ù†Ø·Ø¨Ø§Ù‚ - Ø¨Ù‡ Ø§Ø­Ø³Ø§Ø³ØªØ§Ù† Ú¯ÙˆØ´ Ø¯Ù‡ÛŒØ¯',
                'Ø®Ø§Ú©': 'Ø«Ø¨Ø§ØªØŒ Ø¹Ù…Ù„ÛŒØŒ ØµØ¨Ø± - Ø¢Ø±Ø§Ù… Ùˆ Ù…Ø­Ú©Ù…',
                'Ø¨Ø§Ø¯': 'ÙÚ©Ø±ØŒ Ø§Ø±ØªØ¨Ø§Ø·ØŒ ØªØºÛŒÛŒØ± - Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØ­Ù„ÛŒÙ„'
            },
            planets: {
                'Ø®ÙˆØ±Ø´ÛŒØ¯': 'Ù‚Ø¯Ø±ØªØŒ Ù…ÙˆÙÙ‚ÛŒØªØŒ Ø±Ù‡Ø¨Ø±ÛŒ - Ø¨Ù„Ù‡ Ù‚Ø·Ø¹ÛŒ',
                'Ù…Ø§Ù‡': 'Ø§Ø­Ø³Ø§Ø³ØŒ ØªØºÛŒÛŒØ±ØŒ Ø´Ù‡ÙˆØ¯ - Ø¨Ù‡ Ø´Ù‡ÙˆØ¯ØªØ§Ù† Ø§Ø¹ØªÙ…Ø§Ø¯ Ú©Ù†ÛŒØ¯',
                'Ù…Ø±ÛŒØ®': 'Ø¬Ù†Ú¯ØŒ Ø§Ù†Ø±Ú˜ÛŒØŒ Ø§Ù‚Ø¯Ø§Ù… - Ø¨Ø§ Ù‚Ø¯Ø±Øª Ø¬Ù„Ùˆ Ø¨Ø±ÙˆÛŒØ¯',
                'Ø¹Ø·Ø§Ø±Ø¯': 'Ø§Ø±ØªØ¨Ø§Ø·ØŒ Ù‡ÙˆØ´ØŒ ØªØ¬Ø§Ø±Øª - Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯',
                'Ù…Ø´ØªØ±ÛŒ': 'Ø®ÙˆØ´Ø¨Ø®ØªÛŒØŒ Ø±Ø´Ø¯ØŒ Ø¨Ø±Ú©Øª - Ø¨Ù„Ù‡ Ø¨Ø§ Ø¨Ø±Ú©Øª',
                'Ø²Ù‡Ø±Ù‡': 'Ø¹Ø´Ù‚ØŒ Ø²ÛŒØ¨Ø§ÛŒÛŒØŒ Ù‡Ù†Ø± - Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª Ø¯Ø± Ø¹Ø´Ù‚',
                'Ø²Ø­Ù„': 'Ù…Ø­Ø¯ÙˆØ¯ÛŒØªØŒ Ø¯Ø±Ø³ØŒ ØµØ¨Ø± - ØµØ¨Ø± Ú©Ù†ÛŒØ¯'
            }
        };

        function toggleMethod(element) {
            const method = element.getAttribute('data-method');
            const index = selectedMethods.indexOf(method);
            
            if (index === -1) {
                selectedMethods.push(method);
                element.classList.add('active');
            } else {
                selectedMethods.splice(index, 1);
                element.classList.remove('active');
            }
        }

        function calculateJafr(text) {
            let totalValue = 0;
            let letterValues = [];
            const cleanText = text.replace(/[ØŸØŒØ›:.!?\s]/g, '');
            
            for (let char of cleanText) {
                const value = abjadTable[char] || 0;
                if (value > 0) {
                    totalValue += value;
                    letterValues.push({ char, value });
                }
            }

            return {
                totalValue,
                reducedValue: reduceToSingleDigit(totalValue),
                letterCount: letterValues.length,
                letterValues,
                cleanText,
                modValues: {
                    mod2: totalValue % 2,
                    mod3: totalValue % 3,
                    mod4: totalValue % 4,
                    mod7: totalValue % 7,
                    mod12: totalValue % 12
                }
            };
        }

        function reduceToSingleDigit(num) {
            while (num > 9) {
                let sum = 0;
                while (num > 0) {
                    sum += num % 10;
                    num = Math.floor(num / 10);
                }
                num = sum;
            }
            return num;
        }

        function getTraditionalInterpretation(jafr) {
            const reduced = jafr.reducedValue;
            return {
                title: 'ØªÙØ³ÛŒØ± Ø³Ù†ØªÛŒ (Ø§Ø¨Ø¬Ø¯)',
                content: interpretations.traditional[reduced] || 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ£Ù…Ù„ Ø¨ÛŒØ´ØªØ±',
                confidence: 85
            };
        }

        function getZodiacInterpretation(jafr) {
            const zodiacIndex = jafr.modValues.mod12;
            const sign = zodiacSigns[zodiacIndex];
            return {
                title: 'ØªÙØ³ÛŒØ± Ø¨Ø±ÙˆØ¬',
                content: `Ø¨Ø±Ø¬ ${sign}: ${interpretations.zodiac[sign]}`,
                confidence: 80
            };
        }

        function getElementInterpretation(jafr) {
            const elementIndex = jafr.modValues.mod4;
            const element = elements[elementIndex];
            return {
                title: 'ØªÙØ³ÛŒØ± Ø¹Ù†Ø§ØµØ±',
                content: `Ø¹Ù†ØµØ± ${element}: ${interpretations.elements[element]}`,
                confidence: 75
            };
        }

        function getPlanetInterpretation(jafr) {
            const planetIndex = jafr.modValues.mod7;
            const planet = planets[planetIndex];
            return {
                title: 'ØªÙØ³ÛŒØ± Ø³ÛŒØ§Ø±Ø§Øª',
                content: `Ø³ÛŒØ§Ø±Ù‡ ${planet}: ${interpretations.planets[planet]}`,
                confidence: 85
            };
        }

        function getAdvancedInterpretation(jafr) {
            const isPositive = jafr.modValues.mod2 === 1;
            const strength = jafr.modValues.mod3;
            const timing = jafr.modValues.mod4;
            
            let interpretation = '';
            if (isPositive) {
                interpretation += 'Ø§Ù†Ø±Ú˜ÛŒ Ù…Ø«Ø¨Øª Ù‚ÙˆÛŒ. ';
            } else {
                interpretation += 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø­ØªÛŒØ§Ø·. ';
            }
            
            if (strength === 0) {
                interpretation += 'Ù‚Ø¯Ø±Øª Ú©Ø§Ù…Ù„. ';
            } else if (strength === 1) {
                interpretation += 'Ù‚Ø¯Ø±Øª Ù…ØªÙˆØ³Ø·. ';
            } else {
                interpretation += 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ‚ÙˆÛŒØª. ';
            }
            
            if (timing === 0) {
                interpretation += 'Ø²Ù…Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø§Ù‚Ø¯Ø§Ù….';
            } else if (timing === 1) {
                interpretation += 'Ú©Ù…ÛŒ ØµØ¨Ø± Ú©Ù†ÛŒØ¯.';
            } else {
                interpretation += 'Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ù‡Ù… Ø§Ø³Øª.';
            }
            
            return {
                title: 'ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡',
                content: interpretation,
                confidence: 90
            };
        }

        function getFinalVerdict(analyses) {
            let positiveCount = 0;
            let negativeCount = 0;
            let neutralCount = 0;
            
            analyses.forEach(analysis => {
                const content = analysis.content.toLowerCase();
                if (content.includes('Ù…Ø«Ø¨Øª') || content.includes('Ø¨Ù„Ù‡') || content.includes('Ø§Ù‚Ø¯Ø§Ù…') || content.includes('Ø¬Ù„Ùˆ')) {
                    positiveCount++;
                } else if (content.includes('Ù…Ù†ÙÛŒ') || content.includes('Ø®ÛŒØ±') || content.includes('Ø§Ø­ØªÛŒØ§Ø·') || content.includes('ØµØ¨Ø±')) {
                    negativeCount++;
                } else {
                    neutralCount++;
                }
            });
            
            let verdict = '';
            let confidence = 0;
            
            if (positiveCount > negativeCount) {
                verdict = 'âœ… Ù¾Ø§Ø³Ø® Ù…Ø«Ø¨Øª - Ù¾ÛŒØ´ Ø¨Ø±ÙˆÛŒØ¯';
                confidence = Math.min(95, 60 + (positiveCount * 10));
            } else if (negativeCount > positiveCount) {
                verdict = 'âŒ Ù¾Ø§Ø³Ø® Ù…Ù†ÙÛŒ - Ø§Ø­ØªÛŒØ§Ø· Ú©Ù†ÛŒØ¯';
                confidence = Math.min(95, 60 + (negativeCount * 10));
            } else {
                verdict = 'âš–ï¸ Ù…ØªØ¹Ø§Ø¯Ù„ - Ø¨Ø±Ø±Ø³ÛŒ Ø¨ÛŒØ´ØªØ± Ù„Ø§Ø²Ù… Ø§Ø³Øª';
                confidence = 70;
            }
            
            return { verdict, confidence };
        }

        function performAdvancedAnalysis() {
            const question = document.getElementById('questionInput').value.trim();
            
            if (!question) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }

            if (selectedMethods.length === 0) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ø±ÙˆØ´ ØªØ­Ù„ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }

            const jafr = calculateJafr(question);
            const analyses = [];
            
            // Ø§Ù†Ø¬Ø§Ù… ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            if (selectedMethods.includes('traditional')) {
                analyses.push(getTraditionalInterpretation(jafr));
            }
            if (selectedMethods.includes('zodiac')) {
                analyses.push(getZodiacInterpretation(jafr));
            }
            if (selectedMethods.includes('elements')) {
                analyses.push(getElementInterpretation(jafr));
            }
            if (selectedMethods.includes('planets')) {
                analyses.push(getPlanetInterpretation(jafr));
            }
            if (selectedMethods.includes('advanced')) {
                analyses.push(getAdvancedInterpretation(jafr));
            }
            
            const finalResult = getFinalVerdict(analyses);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            document.getElementById('results').style.display = 'block';
            
            // Ù¾Ø§Ø³Ø® Ù†Ù‡Ø§ÛŒÛŒ
            document.getElementById('finalAnswer').innerHTML = `
                <div style="font-size: 24px; margin-bottom: 15px;">ğŸ“Š Ù†ØªÛŒØ¬Ù‡ ØªØ­Ù„ÛŒÙ„ Ø¬ÙØ±</div>
                <div style="font-size: 18px; margin-bottom: 10px;">Ø³ÙˆØ§Ù„: ${question}</div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: ${finalResult.confidence}%"></div>
                </div>
                <div style="margin-top: 15px;">Ø§Ø·Ù…ÛŒÙ†Ø§Ù†: ${finalResult.confidence}Ùª</div>
                <div style="margin-top: 10px;">Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„: ${selectedMethods.length} Ø±ÙˆØ´</div>
            `;
            
            // Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„
            let analysisHTML = '';
            analyses.forEach(analysis => {
                analysisHTML += `
                    <div class="analysis-card">
                        <h3>${analysis.title}</h3>
                        <div class="interpretation-text">${analysis.content}</div>
                        <div class="confidence-bar" style="margin-top: 10px;">
                            <div class="confidence-fill" style="width: ${analysis.confidence}%"></div>
                        </div>
                        <div style="margin-top: 5px; font-size: 14px;">Ø§Ø·Ù…ÛŒÙ†Ø§Ù†: ${analysis.confidence}Ùª</div>
                    </div>
                `;
            });
            document.getElementById('analysisGrid').innerHTML = analysisHTML;
            
            // Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­Ø§Ø³Ø¨Ø§Øª
            let letterBreakdown = '';
            jafr.letterValues.forEach(item => {
                letterBreakdown += `<div class="letter-value">${item.char}<br>${item.value}</div>`;
            });
            
            document.getElementById('calculationDetails').innerHTML = `
                <h3>ğŸ“Š Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­Ø§Ø³Ø¨Ø§Øª</h3>
                <div style="margin-bottom: 15px;">
                    <strong>Ù…ØªÙ† Ù¾Ø§Ú© Ø´Ø¯Ù‡:</strong> ${jafr.cleanText}<br>
                    <strong>ØªØ¹Ø¯Ø§Ø¯ Ø­Ø±ÙˆÙ:</strong> ${jafr.letterCount}<br>
                    <strong>Ù…Ø¬Ù…ÙˆØ¹ Ú©Ù„:</strong> <span class="number-highlight">${jafr.totalValue}</span><br>
                    <strong>Ø¹Ø¯Ø¯ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡:</strong> <span class="number-highlight">${jafr.reducedValue}</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>ØªØ¬Ø²ÛŒÙ‡ Ø­Ø±ÙˆÙ:</strong>
                    <div class="letter-breakdown">${letterBreakdown}</div>
                </div>
            `;
            
            // Ø­Ú©Ù… Ù†Ù‡Ø§ÛŒÛŒ
            document.getElementById('finalVerdict').innerHTML = `
                <div style="font-size: 24px; margin-bottom: 15px;">âš–ï¸ Ø­Ú©Ù… Ù†Ù‡Ø§ÛŒÛŒ</div>
                <div style="font-size: 20px; margin-bottom: 15px;">${finalResult.verdict}</div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: ${finalResult.confidence}%"></div>
                </div>
                <div style="margin-top: 15px;">Ø¯Ø±Ø¬Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù†: ${finalResult.confidence}Ùª</div>
                <div style="margin-top: 20px; font-size: 16px; line-height: 1.6;">
                    <strong>ØªÙˆØµÛŒÙ‡:</strong> Ø§ÛŒÙ† ØªØ­Ù„ÛŒÙ„ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¹Ù„Ù… Ø¬ÙØ± Ø³Ù†ØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ Ø§Ø³Øª. 
                    Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø¹Ù‚Ù„ Ùˆ Ù…Ù†Ø·Ù‚ Ø®ÙˆØ¯ Ù†ÛŒØ² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø± ØªØµÙ…ÛŒÙ…Ø§Øª Ù…Ù‡Ù… Ø¨Ø§ Ø§ÙØ±Ø§Ø¯ Ù…Ø·Ù„Ø¹ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.
                </div>
            `;
        }
    </script>
</body>
</html>
